/**
 * @file tpl_invoque.S
 *
 * @section descr File description
 *
 * System call user level invoque API.
 *
 * @warning this file is generated by gen_invoque.sh based on the 
 * tpl_os_service_ids.h header file.
 *
 * @section copyright Copyright
 *
 * Trampoline OS
 *
 * Trampoline is copyright (c) IRCCyN 2005+
 * Copyright ESEO for function and data structures documentation and ARM port
 * Trampoline is protected by the French intellectual property law.
 *
 * This software is distributed under the Lesser GNU Public Licence
 *
 * @section infos File informations
 *
 * $Date$
 * $Rev$
 * $Author$
 * $URL$
 */
#include "tpl_os_application_def.h"
#include "tpl_os_service_ids.h"

#ifndef WITH_SYSTEM_CALL
#error "This file should not be part of your project since WITH_SYSTEM_CALL is not defined"
#endif

#ifdef WITH_SYSTEM_CALL

.global ActivateTask
ActivateTask:
  mov r3, #OSServiceId_ActivateTask
  swi #OSServiceId_ActivateTask
  mov pc, lr

.global TerminateTask
TerminateTask:
  mov r3, #OSServiceId_TerminateTask
  swi #OSServiceId_TerminateTask
  mov pc, lr

.global ChainTask
ChainTask:
  mov r3, #OSServiceId_ChainTask
  swi #OSServiceId_ChainTask
  mov pc, lr

.global Schedule
Schedule:
  mov r3, #OSServiceId_Schedule
  swi #OSServiceId_Schedule
  mov pc, lr

.global GetTaskID
GetTaskID:
  mov r3, #OSServiceId_GetTaskID
  swi #OSServiceId_GetTaskID
  mov pc, lr

.global GetTaskState
GetTaskState:
  mov r3, #OSServiceId_GetTaskState
  swi #OSServiceId_GetTaskState
  mov pc, lr

.global EnableAllInterrupts
EnableAllInterrupts:
  mov r3, #OSServiceId_EnableAllInterrupts
  swi #OSServiceId_EnableAllInterrupts
  mov pc, lr

.global DisableAllInterrupts
DisableAllInterrupts:
  mov r3, #OSServiceId_DisableAllInterrupts
  swi #OSServiceId_DisableAllInterrupts
  mov pc, lr

.global ResumeAllInterrupts
ResumeAllInterrupts:
  mov r3, #OSServiceId_ResumeAllInterrupts
  swi #OSServiceId_ResumeAllInterrupts
  mov pc, lr

.global SuspendAllInterrupts
SuspendAllInterrupts:
  mov r3, #OSServiceId_SuspendAllInterrupts
  swi #OSServiceId_SuspendAllInterrupts
  mov pc, lr

.global ResumeOSInterrupts
ResumeOSInterrupts:
  mov r3, #OSServiceId_ResumeOSInterrupts
  swi #OSServiceId_ResumeOSInterrupts
  mov pc, lr

.global SuspendOSInterrupts
SuspendOSInterrupts:
  mov r3, #OSServiceId_SuspendOSInterrupts
  swi #OSServiceId_SuspendOSInterrupts
  mov pc, lr

.global GetResource
GetResource:
  mov r3, #OSServiceId_GetResource
  swi #OSServiceId_GetResource
  mov pc, lr

.global ReleaseResource
ReleaseResource:
  mov r3, #OSServiceId_ReleaseResource
  swi #OSServiceId_ReleaseResource
  mov pc, lr

.global SetEvent
SetEvent:
  mov r3, #OSServiceId_SetEvent
  swi #OSServiceId_SetEvent
  mov pc, lr

.global ClearEvent
ClearEvent:
  mov r3, #OSServiceId_ClearEvent
  swi #OSServiceId_ClearEvent
  mov pc, lr

.global GetEvent
GetEvent:
  mov r3, #OSServiceId_GetEvent
  swi #OSServiceId_GetEvent
  mov pc, lr

.global WaitEvent
WaitEvent:
  mov r3, #OSServiceId_WaitEvent
  swi #OSServiceId_WaitEvent
  mov pc, lr

.global GetAlarmBase
GetAlarmBase:
  mov r3, #OSServiceId_GetAlarmBase
  swi #OSServiceId_GetAlarmBase
  mov pc, lr

.global GetAlarm
GetAlarm:
  mov r3, #OSServiceId_GetAlarm
  swi #OSServiceId_GetAlarm
  mov pc, lr

.global SetRelAlarm
SetRelAlarm:
  mov r3, #OSServiceId_SetRelAlarm
  swi #OSServiceId_SetRelAlarm
  mov pc, lr

.global SetAbsAlarm
SetAbsAlarm:
  mov r3, #OSServiceId_SetAbsAlarm
  swi #OSServiceId_SetAbsAlarm
  mov pc, lr

.global CancelAlarm
CancelAlarm:
  mov r3, #OSServiceId_CancelAlarm
  swi #OSServiceId_CancelAlarm
  mov pc, lr

.global GetActiveApplicationMode
GetActiveApplicationMode:
  mov r3, #OSServiceId_GetActiveApplicationMode
  swi #OSServiceId_GetActiveApplicationMode
  mov pc, lr

.global StartOS
StartOS:
  stmfd sp!, {r0} /* saves StartOS parameter */
  bl tpl_init_machine
  ldmfd sp!, {r0}
  mov r3, #OSServiceId_StartOS
  swi #OSServiceId_StartOS
  bl tpl_sleep
  mov pc, lr

.global ShutdownOS
ShutdownOS:
  mov r3, #OSServiceId_ShutdownOS
  swi #OSServiceId_ShutdownOS
  mov pc, lr

.global TerminateISR2
TerminateISR2:
  mov r3, #OSServiceId_TerminateISR2
  swi #OSServiceId_TerminateISR2
  mov pc, lr

#endif /* defined WITH_SYSTEM_CALL */
